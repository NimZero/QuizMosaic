function T(){}function pe(t){return t()}function le(){return Object.create(null)}function I(t){t.forEach(pe)}function me(t){return typeof t=="function"}function ye(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function be(t){return Object.keys(t).length===0}function a(t,e){t.appendChild(e)}function H(t,e,n){t.insertBefore(e,n||null)}function U(t){t.parentNode&&t.parentNode.removeChild(t)}function w(t){return document.createElement(t)}function R(t){return document.createTextNode(t)}function A(){return R(" ")}function Q(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function ke(t){return function(e){return e.preventDefault(),t.call(this,e)}}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function we(t){return Array.from(t.childNodes)}function qe(t,e){e=""+e,t.data!==e&&(t.data=e)}function se(t,e){t.value=e??""}let ee;function L(t){ee=t}const D=[],ue=[];let J=[];const oe=[],ze=Promise.resolve();let W=!1;function Ce(){W||(W=!0,ze.then(ge))}function X(t){J.push(t)}const V=new Set;let x=0;function ge(){if(x!==0)return;const t=ee;do{try{for(;x<D.length;){const e=D[x];x++,L(e),$e(e.$$)}}catch(e){throw D.length=0,x=0,e}for(L(null),D.length=0,x=0;ue.length;)ue.pop()();for(let e=0;e<J.length;e+=1){const n=J[e];V.has(n)||(V.add(n),n())}J.length=0}while(D.length);for(;oe.length;)oe.pop()();W=!1,V.clear(),L(t)}function $e(t){if(t.fragment!==null){t.update(),I(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(X)}}function Ee(t){const e=[],n=[];J.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),J=e}const Ne=new Set;function ve(t,e){t&&t.i&&(Ne.delete(t),t.i(e))}function Y(t,e){t.d(1),e.delete(t.key)}function Z(t,e,n,i,l,_,s,k,u,r,y,b){let p=t.length,z=_.length,v=p;const f={};for(;v--;)f[t[v].key]=v;const d=[],h=new Map,g=new Map,S=[];for(v=z;v--;){const o=b(l,_,v),$=n(o);let N=s.get($);N?i&&S.push(()=>N.p(o,e)):(N=r($,o),N.c()),h.set($,d[v]=N),$ in f&&g.set($,Math.abs(v-f[$]))}const O=new Set,E=new Set;function q(o){ve(o,1),o.m(k,y),s.set(o.key,o),y=o.first,z--}for(;p&&z;){const o=d[z-1],$=t[p-1],N=o.key,B=$.key;o===$?(y=o.first,p--,z--):h.has(B)?!s.has(N)||O.has(N)?q(o):E.has(B)?p--:g.get(N)>g.get(B)?(E.add(N),q(o)):(O.add(B),p--):(u($,s),p--)}for(;p--;){const o=t[p];h.has(o.key)||u(o,s)}for(;z;)q(d[z-1]);return I(S),d}function Ae(t,e,n,i){const{fragment:l,after_update:_}=t.$$;l&&l.m(e,n),i||X(()=>{const s=t.$$.on_mount.map(pe).filter(me);t.$$.on_destroy?t.$$.on_destroy.push(...s):I(s),t.$$.on_mount=[]}),_.forEach(X)}function Me(t,e){const n=t.$$;n.fragment!==null&&(Ee(n.after_update),I(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Se(t,e){t.$$.dirty[0]===-1&&(D.push(t),Ce(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Oe(t,e,n,i,l,_,s,k=[-1]){const u=ee;L(t);const r=t.$$={fragment:null,ctx:[],props:_,update:T,not_equal:l,bound:le(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:le(),dirty:k,skip_bound:!1,root:e.target||u.$$.root};s&&s(r.root);let y=!1;if(r.ctx=n?n(t,e.props||{},(b,p,...z)=>{const v=z.length?z[0]:p;return r.ctx&&l(r.ctx[b],r.ctx[b]=v)&&(!r.skip_bound&&r.bound[b]&&r.bound[b](v),y&&Se(t,b)),p}):[],r.update(),y=!0,I(r.before_update),r.fragment=i?i(r.ctx):!1,e.target){if(e.hydrate){const b=we(e.target);r.fragment&&r.fragment.l(b),b.forEach(U)}else r.fragment&&r.fragment.c();e.intro&&ve(t.$$.fragment),Ae(t,e.target,e.anchor,e.customElement),ge()}L(u)}class je{$destroy(){Me(this,1),this.$destroy=T}$on(e,n){if(!me(n))return T;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const l=i.indexOf(n);l!==-1&&i.splice(l,1)}}$set(e){this.$$set&&!be(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function re(t,e,n){const i=t.slice();return i[13]=e[n],i}function de(t,e,n){const i=t.slice();return i[16]=e[n],i}function ce(t,e,n){const i=t.slice();return i[16]=e[n],i}function fe(t,e){let n,i,l,_,s,k,u,r,y,b,p,z;return{key:t,first:null,c(){n=w("div"),i=w("span"),i.textContent="Nom:",l=A(),_=w("input"),u=w("button"),r=R("supprimer"),b=A(),c(_,"type","text"),c(_,"data-catid",s=e[16].id),_.value=k=e[16].name,_.required=!0,c(u,"class","nz-quizmosaic--admin-btn"),c(u,"data-catid",y=e[16].id),c(n,"class","nz-quizmosaic--admin-row"),this.first=n},m(v,f){H(v,n,f),a(n,i),a(n,l),a(n,_),a(n,u),a(u,r),a(n,b),p||(z=[Q(_,"change",e[6]),Q(u,"click",e[7])],p=!0)},p(v,f){e=v,f&1&&s!==(s=e[16].id)&&c(_,"data-catid",s),f&1&&k!==(k=e[16].name)&&_.value!==k&&(_.value=k),f&1&&y!==(y=e[16].id)&&c(u,"data-catid",y)},d(v){v&&U(n),p=!1,I(z)}}}function he(t,e){let n,i,l,_=(e[16].name??"N/A")+"",s,k,u,r,y,b,p,z,v;return{key:t,first:null,c(){n=w("div"),i=w("span"),l=R("Reponse pour: "),s=R(_),k=A(),u=w("input"),p=A(),c(u,"type","text"),c(u,"data-questid",r=e[13].id),c(u,"data-catid",y=e[16].id),u.value=b=e[13].answers[e[16].id]??"",u.required=!0,this.first=n},m(f,d){H(f,n,d),a(n,i),a(i,l),a(i,s),a(n,k),a(n,u),a(n,p),z||(v=Q(u,"change",e[10]),z=!0)},p(f,d){e=f,d&1&&_!==(_=(e[16].name??"N/A")+"")&&qe(s,_),d&2&&r!==(r=e[13].id)&&c(u,"data-questid",r),d&1&&y!==(y=e[16].id)&&c(u,"data-catid",y),d&3&&b!==(b=e[13].answers[e[16].id]??"")&&u.value!==b&&(u.value=b)},d(f){f&&U(n),z=!1,v()}}}function _e(t,e){let n,i,l,_,s,k,u,r,y,b,p,z,v,f=[],d=new Map,h,g,S,O=e[0];const E=q=>q[16].id;for(let q=0;q<O.length;q+=1){let o=de(e,O,q),$=E(o);d.set($,f[q]=he($,o))}return{key:t,first:null,c(){n=w("div"),i=w("div"),l=w("span"),l.textContent="Question:",_=A(),s=w("input"),r=A(),y=w("button"),b=R("supprimer"),z=A(),v=w("div");for(let q=0;q<f.length;q+=1)f[q].c();h=A(),c(s,"type","text"),c(s,"data-questid",k=e[13].id),s.value=u=e[13].question,s.required=!0,c(y,"type","button"),c(y,"class","nz-quizmosaic--admin-btn"),c(y,"data-questid",p=e[13].id),c(i,"class","nz-quizmosaic--admin-row"),c(v,"class","nz-quizmosaic--admin-container nz-quizmosaic--admin-mt"),this.first=n},m(q,o){H(q,n,o),a(n,i),a(i,l),a(i,_),a(i,s),a(i,r),a(i,y),a(y,b),a(n,z),a(n,v);for(let $=0;$<f.length;$+=1)f[$]&&f[$].m(v,null);a(n,h),g||(S=[Q(s,"change",e[9]),Q(y,"click",e[11])],g=!0)},p(q,o){e=q,o&2&&k!==(k=e[13].id)&&c(s,"data-questid",k),o&2&&u!==(u=e[13].question)&&s.value!==u&&(s.value=u),o&2&&p!==(p=e[13].id)&&c(y,"data-questid",p),o&1027&&(O=e[0],f=Z(f,o,E,1,e,O,d,v,Y,he,null,de))},d(q){q&&U(n);for(let o=0;o<f.length;o+=1)f[o].d();g=!1,I(S)}}}function Qe(t){let e,n,i,l,_,s,k,u,r,y,b,p,z,v,f,d,h,g=[],S=new Map,O,E,q,o,$,N,B,P,j=[],te=new Map,K,ne,F=t[0];const ie=m=>m[16].id;for(let m=0;m<F.length;m+=1){let C=ce(t,F,m),M=ie(C);S.set(M,g[m]=fe(M,C))}let G=t[1];const ae=m=>m[13].id;for(let m=0;m<G.length;m+=1){let C=re(t,G,m),M=ae(C);te.set(M,j[m]=_e(M,C))}return{c(){e=w("form"),n=w("input"),i=A(),l=w("div"),_=w("span"),_.textContent="Nom:",s=A(),k=w("input"),u=A(),r=w("button"),r.textContent="créer",y=A(),b=w("section"),p=w("div"),z=w("h1"),z.textContent="Categories",v=A(),f=w("button"),f.textContent="+",d=A(),h=w("div");for(let m=0;m<g.length;m+=1)g[m].c();O=A(),E=w("section"),q=w("div"),o=w("h1"),o.textContent="Questions",$=A(),N=w("button"),N.textContent="+",B=A(),P=w("div");for(let m=0;m<j.length;m+=1)j[m].c();c(n,"type","hidden"),c(n,"name","json"),n.value=t[2],c(k,"type","text"),c(k,"name","surveyName"),k.required=!0,c(r,"type","submit"),c(l,"class","nz-quizmosaic--admin-header"),c(f,"type","button"),c(f,"class","nz-quizmosaic--admin-addBtn"),c(p,"class","nz-quizmosaic--admin-header"),c(h,"class","nz-quizmosaic--admin-container"),c(N,"type","button"),c(N,"class","nz-quizmosaic--admin-addBtn"),c(q,"class","nz-quizmosaic--admin-header"),c(P,"class","nz-quizmosaic--admin-container nz-quizmosaic--admin-gap-2"),c(e,"method","post")},m(m,C){H(m,e,C),a(e,n),a(e,i),a(e,l),a(l,_),a(l,s),a(l,k),se(k,t[3]),a(l,u),a(l,r),a(e,y),a(e,b),a(b,p),a(p,z),a(p,v),a(p,f),a(b,d),a(b,h);for(let M=0;M<g.length;M+=1)g[M]&&g[M].m(h,null);a(e,O),a(e,E),a(E,q),a(q,o),a(q,$),a(q,N),a(E,B),a(E,P);for(let M=0;M<j.length;M+=1)j[M]&&j[M].m(P,null);K||(ne=[Q(k,"input",t[12]),Q(f,"click",t[5]),Q(N,"click",t[8]),Q(e,"submit",ke(t[4]))],K=!0)},p(m,[C]){C&4&&(n.value=m[2]),C&8&&k.value!==m[3]&&se(k,m[3]),C&193&&(F=m[0],g=Z(g,C,ie,1,m,F,S,h,Y,fe,null,ce)),C&3587&&(G=m[1],j=Z(j,C,ae,1,m,G,te,P,Y,_e,null,re))},i:T,o:T,d(m){m&&U(e);for(let C=0;C<g.length;C+=1)g[C].d();for(let C=0;C<j.length;C+=1)j[C].d();K=!1,I(ne)}}}function Ie(t,e,n){let i=[],l=[],_=null,s="";const k=d=>{let h={};i.forEach(E=>{h[E.id]=E.name}),n(2,_=JSON.stringify({name:s,questions:l,categories:h}));var S=wp.api.models.Post.extend({url(){return wpApiSettings.root+"nz-quizmosaic/v1/survey/"+(this.get("id")??"")}}),O=new S;O.save({data:_}).done(function(){let E=O.toJSON();alert("Created survey id: #"+E.data.id)}).fail(function(E){console.error("Une erreur s'est produite lors de la création:",E.responseJSON)})},u=d=>{let h;i.length==0?h=1:h=i.slice(-1)[0].id+1,n(0,i=[...i,{id:h,name:null}])},r=d=>{const h=i.findIndex(g=>g.id==d.target.dataset.catid);n(0,i[h].name=d.target.value,i)},y=d=>{const h=i.findIndex(g=>g.id==d.target.dataset.catid);i.splice(h,1),n(0,i)},b=d=>{let h;l.length==0?h=1:h=l.slice(-1)[0].id+1,n(1,l=[...l,{id:h,question:null,answers:[]}])},p=d=>{const h=l.findIndex(g=>g.id==d.target.dataset.questid);n(1,l[h].question=d.target.value,l)},z=d=>{var h=l.find(S=>S.id==d.target.dataset.questid),g=h.answers.find(S=>S.category==d.target.dataset.catid);g===void 0?(g={category:d.target.dataset.catid,answer:d.target.value},h.answers.push(g)):g.answer=d.target.value},v=d=>{const h=l.findIndex(g=>g.id==d.target.dataset.questid);l.splice(h,1),n(1,l)};function f(){s=this.value,n(3,s)}return[i,l,_,s,k,u,r,y,b,p,z,v,f]}class Be extends je{constructor(e){super(),Oe(this,e,Ie,Qe,ye,{})}}wp.api.loadPromise.done(function(){new Be({target:document.getElementById("app")})});app;
